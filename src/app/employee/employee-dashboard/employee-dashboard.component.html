<div class="dashboard-container">
  <div class="dashboard-header">
    <div class="header-content">
      <div class="header-left">
        <div class="logo-section">
          <div class="logo-icon">
            <mat-icon>store</mat-icon>
          </div>
          <div class="title-section">
            <h1>Employee Dashboard</h1>
            <p>Welcome, {{ employeeName }}</p>
          </div>
        </div>
      </div>
      <div class="header-right">
        <button mat-raised-button class="logout-btn" (click)="logout()">
          <mat-icon>logout</mat-icon>
          Logout
        </button>
      </div>
    </div>
  </div>

  <div class="dashboard-content">
    <mat-card class="filters-card">
      <div class="filters-header">
        <mat-icon>filter_list</mat-icon>
        <h3>Filter Orders</h3>
      </div>
      <div class="filter-buttons">
        <button 
          mat-raised-button 
          [class.active]="activeFilter === 'All'"
          (click)="filterOrders('All')"
          class="filter-btn">
          All Orders
        </button>
        <button 
          mat-raised-button 
          [class.active]="activeFilter === 'Pending'"
          (click)="filterOrders('Pending')"
          class="filter-btn pending">
          Pending
        </button>
        <button 
          mat-raised-button 
          [class.active]="activeFilter === 'Accepted'"
          (click)="filterOrders('Accepted')"
          class="filter-btn accepted">
          Accepted
        </button>
        <button 
          mat-raised-button 
          [class.active]="activeFilter === 'Cancelled'"
          (click)="filterOrders('Cancelled')"
          class="filter-btn cancelled">
          Cancelled
        </button>
        <button 
          mat-raised-button 
          [class.active]="activeFilter === 'Delivered'"
          (click)="filterOrders('Delivered')"
          class="filter-btn delivered">
          Delivered
        </button>
      </div>
    </mat-card>

    <mat-card class="orders-card">
      <div class="orders-header">
        <mat-icon>shopping_cart</mat-icon>
        <h3>All Orders</h3>
        <span class="order-count">{{ filteredOrders.length }} orders</span>
      </div>

      <div *ngIf="loading" class="loading-container">
        <mat-spinner></mat-spinner>
      </div>

      <div *ngIf="!loading && filteredOrders.length === 0" class="no-orders">
        <mat-icon>inbox</mat-icon>
        <p>No orders found</p>
      </div>

      <div *ngIf="!loading && filteredOrders.length > 0" class="table-container">
        <table class="orders-table">
          <thead>
            <tr>
              <th>ORDER ID</th>
              <th>CUSTOMER NAME</th>
              <th>ORDER DATE</th>
              <th>ITEMS</th>
              <th>TOTAL AMOUNT</th>
              <th>STATUS</th>
              <th>ACTIONS</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let order of filteredOrders" class="order-row">
              <td>#{{ order.id }}</td>
              <td>{{ order.customer_name }}</td>
              <td>{{ order.order_date | date: 'M/d/yy, h:mm a' }}</td>
              <td class="items-cell">
                <span class="items-summary">{{ order.items || 'N/A' }}</span>
              </td>
              <td class="amount-cell">â‚¹{{ parseFloat(order.total_amount).toFixed(2) }}</td>
              <td>
                <span class="status-badge" [ngClass]="getStatusClass(order.status)">
                  {{ order.status }}
                </span>
              </td>
              <td class="actions-cell">
                <button 
                  mat-icon-button 
                  (click)="viewBill(order.id)"
                  matTooltip="View Bill"
                  class="action-btn view-btn">
                  <mat-icon>receipt</mat-icon>
                </button>
                <button 
                  mat-icon-button 
                  *ngIf="order.status === 'Pending'"
                  (click)="acceptOrder(order)"
                  matTooltip="Accept Order"
                  class="action-btn accept-btn">
                  <mat-icon>check_circle</mat-icon>
                </button>
                <button 
                  mat-icon-button 
                  *ngIf="order.status === 'Pending'"
                  (click)="cancelOrder(order)"
                  matTooltip="Cancel Order"
                  class="action-btn cancel-btn">
                  <mat-icon>cancel</mat-icon>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </mat-card>
  </div>
</div>
